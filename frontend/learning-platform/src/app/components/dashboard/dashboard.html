<div class="dashboard-wrapper">
    <div class="header">
        <h1>מרכז הלמידה האישי שלך</h1>
        <p>בחר נושא או הקלד נושא חדש, וה-AI יבנה לך שיעור מותאם אישית</p>
    </div>

    <div class="card">
        <div class="input-group">
            <label for="category">מה תרצה ללמוד היום?</label>
            <input 
                id="category" 
                type="text" 
                list="categoryOptions" 
                [(ngModel)]="selectedCategoryName" 
                placeholder="למשל: מדעים, היסטוריה..."
                class="custom-input">
            <datalist id="categoryOptions">
                <option *ngFor="let cat of categories" [value]="cat.name"></option>
            </datalist>
        </div>

        <div class="input-group">
            <label for="subCategory">בחר נושא ספציפי:</label>
            <input 
                id="subCategory" 
                type="text" 
                list="subCategoryOptions" 
                [(ngModel)]="selectedSubCategoryName" 
                placeholder="למשל: חורים שחורים, השואה..."
                class="custom-input">
            <datalist id="subCategoryOptions">
                <option *ngFor="let sub of subCategories" [value]="sub.name"></option>
            </datalist>
        </div>

        <div class="input-group">
            <label for="prompt">מה השאלה המדויקת שלך?</label>
            <textarea 
                id="prompt"
                [(ngModel)]="userPrompt" 
                placeholder="למשל: הסבר לי על הנושא בצורה פשוטה לילדים..."
                rows="4">
            </textarea>
        </div>

        <button (click)="generateLesson()" [disabled]="loading || !selectedSubCategoryName || !userPrompt">
            <span *ngIf="!loading">צור שיעור עכשיו</span>
            <span *ngIf="loading" class="spinner">מייצר שיעור... </span>
        </button>
    </div>

    <div *ngIf="aiLesson && !loading" class="lesson-result">
        <div class="result-header">
            <h3>השיעור המוכן שלך בנושא {{selectedSubCategoryName}}:</h3>
        </div>
        <div class="lesson-content">
            {{ aiLesson }}
        </div>
        <button class="secondary-button" (click)="aiLesson = ''" style="margin-top: 20px; background: #6c757d;">נקה תוצאה</button>
    </div>
</div>